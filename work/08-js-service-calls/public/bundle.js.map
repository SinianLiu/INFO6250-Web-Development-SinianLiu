{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://08-js-service-calls/./src/services.js","webpack://08-js-service-calls/./src/state.js","webpack://08-js-service-calls/./src/view.js","webpack://08-js-service-calls/webpack/bootstrap","webpack://08-js-service-calls/webpack/runtime/define property getters","webpack://08-js-service-calls/webpack/runtime/hasOwnProperty shorthand","webpack://08-js-service-calls/webpack/runtime/make namespace object","webpack://08-js-service-calls/./src/word.js"],"sourcesContent":["export function fetchLogin (username) {\n  return fetch('/api/session/', {\n    method: 'POST',\n    headers: {\n      'content-type': 'application/json',\n    },\n    body: JSON.stringify({ username }),\n  })\n    .catch(() => Promise.reject({ error: 'network-error' }))\n    .then(response => {\n      if (!response.ok) {\n        return response.json().then(err => Promise.reject(err));\n      }\n      return response.json();\n    });\n}\n\n\nexport function fetchSession () {\n  return fetch('/api/session')\n    .catch(() => Promise.reject({ error: 'network-error' }))\n    .then(response => {\n      return response.json();\n    })\n}\n\n\nexport function fetchUserData () {\n  return fetch('/api/word')\n    .catch(() => Promise.reject({ error: 'network-error' }))\n    .then((response) => {\n      return response.json();\n    });\n}\n\n\nexport function fetchNewWord (word) {\n  return fetch('/api/word', {\n    method: 'PUT',\n    headers: {\n      'content-type': 'application/json',\n    },\n    body: JSON.stringify({ word }),\n  })\n    .catch(err => Promise.reject({ error: 'network-error' }))\n    .then(response => {\n      if (response.ok) {\n        return response.json()\n      } else {\n        return response.json().then(err => Promise.reject(err))\n      }\n    })\n}\n\n\nexport function fetchDelete () {\n  return fetch('/api/session', {\n    method: 'DELETE',\n    headers: {\n      'content-type': 'application/json',\n    },\n  })\n    .catch(err => Promise.reject({ error: 'network-error' }))\n    .then(response => {\n      return response.json();\n    })\n}\n\n\n","const state = {\n  userData: {},\n};\n\n\nstate.updateUserData = function (userData) {\n  state.userData = userData;\n};\n\nexport default state;","\nexport default function render (rootEl, state) {\n  const { username, storedWord } = state.userData;\n  if (!username && !storedWord) {\n    rootEl.innerHTML = `\n      <div class=\"login\">\n        <label for=\"username\">Enter User Name:</label>\n        <input type=\"text\" class=\"username\" id=\"username\"/>\n        <button class=\"button login-button\">Login</button>\n      </div>\n    `\n  }\n  else {\n    rootEl.innerHTML = `\n      <div class=\"data-container\">\n        <div class=\"data-details\">\n          <p>Username: <span>${username}</span></p>\n          <p>Word: <span>${storedWord}</span></p>\n        </div>  \n\n        <div class=\"data-update\">\n          <label for=\"word\">Change Your Word:</label>\n          <input type=\"text\" class=\"word\" id=\"word\">\n          <button class=\"button change-button\">Change</button>\n        </div> \n\n        <div class=\"logout\">       \n          <button class=\"button logout-button\">Logout</button>     \n        </div>              \n      </div>\n    `\n  }\n\n}\n\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","\nimport { fetchLogin, fetchSession, fetchUserData, fetchNewWord, fetchDelete } from './services';\nimport render from './view';\nimport state from './state';\n\n\nconst rootEl = document.querySelector('#root');\nconst errorEl = document.querySelector('.error');\n\n\ngetSession();\n\n\nrootEl.addEventListener('click', (e) => {\n\n  if (e.target.classList.contains('login-button')) {\n    const inputEl = document.querySelector('.username');\n    const username = inputEl.value;\n\n    fetchLogin(username)\n      .catch(err => {\n        if (err.error == 'network-error') {\n          errorEl.innerHTML = `<p>Please check your network connection!</p>`;\n          return;\n        } else if (err.error == 'required-username') {\n          errorEl.innerHTML = `<p>Please input a valid username!</p>`;\n          return;\n        } else if (err.error == 'auth-insufficient') {\n          errorEl.innerHTML = `<p>Please do not input 'dog' as your username!</p>`;\n          return;\n        }\n      })\n      .then(() => {\n        getUserData();\n      })\n  }\n\n\n  if (e.target.classList.contains('change-button')) {\n    const inputEl = document.querySelector('.word');\n    const newWord = inputEl.value;\n\n    fetchNewWord(newWord)\n      .catch(err => {\n        if (err.error == 'auth-missing') {\n          errorEl.innerHTML = `<p>You need to login first!</p>`;\n          render(rootEl, '', '');\n        } else if (err.error == 'invalid-word') {\n          errorEl.innerHTML = `<p>Please input a valid word!</p>`;\n        } else if (err.error == 'network-error') {\n          errorEl.innerHTML = `<p>Please check your network connection!</p>`;\n        } else if (err.error == 'required-word') {\n          errorEl.innerHTML = `<p>Please input a word!</p>`;\n        }\n      })\n      .then(response => {\n        state.updateUserData(response);\n        render(rootEl, state);\n        errorEl.innerHTML = '';\n      });\n  }\n\n\n  if (e.target.classList.contains('logout-button')) {\n    fetchDelete()\n      .catch(err => {\n        if (err.error == 'network-error') {\n          errorEl.innerHTML = `<p>Please check your network connection!</p>`;\n          return;\n        }\n      })\n      .then(() => {\n        state.userData = {};\n        render(rootEl, state);\n        errorEl.innerHTML = '';\n      });\n  }\n})\n\n\nfunction getUserData () {\n  fetchUserData()\n    .catch(err => {\n      if (err.error == 'network-error') {\n        errorEl.innerHTML = `<p>Please check your network connection!</p>`;\n        return;\n      }\n    })\n    .then(response => {\n      if (response.error) {\n        render(rootEl, state);\n        return;\n      }\n\n      state.updateUserData(response);\n      render(rootEl, state);\n      errorEl.innerHTML = '';\n    })\n}\n\n\n\nfunction getSession () {\n  fetchSession()\n    .catch(err => {\n      if (err.error == 'network-error') {\n        errorEl.innerHTML = `<p>Please check your network connection!</p>`;\n        return;\n      }\n    })\n    .then(response => {\n      if (response.error) {\n        render(rootEl, state);\n        return;\n      }\n      getUserData();\n    })\n}\n\n\n\n\n\n"],"names":["fetchLogin","username","fetch","method","headers","body","JSON","stringify","Promise","reject","error","then","response","ok","json","err","fetchSession","fetchUserData","fetchNewWord","word","fetchDelete","state","userData","updateUserData","render","rootEl","_state$userData","storedWord","innerHTML","concat","document","querySelector","errorEl","getSession","addEventListener","e","target","classList","contains","inputEl","value","getUserData","newWord"],"sourceRoot":""}