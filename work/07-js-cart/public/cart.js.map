{"version":3,"file":"cart.js","mappings":"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","sources":["webpack://07-js-cart/./src/render.js","webpack://07-js-cart/./src/state.js","webpack://07-js-cart/webpack/bootstrap","webpack://07-js-cart/webpack/runtime/define property getters","webpack://07-js-cart/webpack/runtime/hasOwnProperty shorthand","webpack://07-js-cart/webpack/runtime/make namespace object","webpack://07-js-cart/./src/controller.js"],"sourcesContent":["import { PAGES } from './state'\n\n\nfunction render (state, rootEl) {\n\n  if (state.page === PAGES.PRODUCTS) {\n    renderProducts(state, rootEl);\n  }\n  if (state.page === PAGES.CART) {\n    renderCart(state, rootEl);\n  }\n}\n\n\nfunction renderProducts (state, rootEl) {\n  const html = state.products.map((product, index) => {\n    return `\n      <li class='product' data-index=\"${index}\">\n        <img src=\"${product.imgUrl}\" name=\"${product.name}\"/>\n        <span>${product.name}: $${product.price}</span>\n        <button class=\"add-to-cart\" data-index=\"${index}\">Add to Cart</button>\n      </li>\n    `;\n  }).join('');\n\n  rootEl.innerHTML = `\n    <div class=\"center-container\">\n      <p>Cat List</p> \n    </div> \n    <ul class=\"products\">${html}</ul>\n    <button class=\"view-cart\">View Cart${state.totalNum ? '(' + state.totalNum + ')' : ''}</button>\n  `;\n};\n\n\nfunction renderCart (state, rootEl) {\n  const html = state.products.map((product, index) => {\n    return `\n      <li class='product' data-index=\"${index}\">\n        <img src=\"${product.imgUrl}\" name=\"${product.name}\"/>\n        <span>${product.name}: $${product.price}</span>\n        <button class=\"add-to-cart\" data-index=\"${index}\">Add to Cart</button>\n      </li>\n    `;\n  }).join('');\n\n\n  const cart_html = state.cartItems.map((item, index) => {\n    const totalPrice = (item.price * item.quantity).toFixed(2);\n    return `\n    <li class='cart-item'>\n      <div class='left'>\n        <img src=\"${item.imgUrl}\"/>\n        <span>${item.name}</span>    \n      </div>\n      <div class='right'>\n        <button data-index=\"${index}\" class=\"decrease\"> - </button>        \n        <span>${item.quantity}</span> \n        <button data-index=\"${index}\" class=\"increase\"> + </button>                \n        <span class=\"total-price\">$${totalPrice}</span> \n      </div>         \n    </li>\n    `;\n  }).join('');\n\n\n  const totalCost = state.totalPrice;\n\n  rootEl.innerHTML = `\n    <div class=\"center-container\">\n      <p>Cat List</p> \n    </div>\n    <ul class=\"products\">${html}</ul>  \n    <div class=\"center-container-2\">\n      <p>Shopping Cart</p>  \n    </div>\n    <div class=\"button-container\">\n      <button class=\"checkout\">Checkout</button>\n      <button class=\"hide-cart\">Hide Cart</button>\n    </div> \n    <span>${totalCost ? 'Total Cost: $' + totalCost.toFixed(2) : 'Nothing in the cart'}</span>\n    <ul class=\"carts\">${cart_html}</ul>\n  `;\n\n}\n\nexport default render;\n\n\n\n","const PAGES = {\n  PRODUCTS: 'products',\n  CART: 'cart',\n};\n\n\nconst state = {\n  products: [\n    { name: \"kitty1\", price: 0.99, imgUrl: 'http://placekitten.com/100/100?image=1' },\n    { name: \"kitty2\", price: 3.14, imgUrl: 'http://placekitten.com/100/100?image=2' },\n    { name: \"kitty3\", price: 2.73, imgUrl: 'http://placekitten.com/100/100?image=3' }\n  ],\n  cartItems: [],\n  page: PAGES.PRODUCTS,\n  totalPrice: 0,\n  totalNum: 0\n};\n\n\nfunction addProduct (index) {\n  const product = state.products[index];\n\n  let isExist = false;\n\n  // 是of 不是in！不然失效\n  for (const item of state.cartItems) {\n    if (item.name === product.name) {\n      isExist = true;\n      item.quantity++;\n      break;\n    }\n  }\n\n  if (!isExist) {\n    state.cartItems.push({\n      name: product.name,\n      quantity: 1,\n      price: product.price,\n      imgUrl: product.imgUrl\n    });\n  }\n\n  state.totalPrice += product.price;\n  state.totalNum += 1;\n}\n\n// TypeError: \"quantity\" is read-only\n// 不能用const\nfunction decreaseQuantity (index) {\n  const item = state.cartItems[index];\n  item.quantity--;\n  state.totalPrice -= item.price;\n  state.totalNum -= 1;\n\n  if (item.quantity === 0) { state.cartItems.splice(index, 1); }\n\n  // 不能这么写！\n  // let quantity = state.cartItems[index].quantity;\n  // quantity--;\n}\n\n\nfunction increaseQuantity (index) {\n  const item = state.cartItems[index];\n  item.quantity++;\n  state.totalPrice += item.price;\n  state.totalNum += 1;\n}\n\n\nfunction clearCart () {\n  state.cartItems = [];\n  state.totalPrice = 0;\n  state.totalNum = 0;\n  state.page = PAGES.PRODUCTS;\n}\n\n\n\nexport default state;\nexport { PAGES, increaseQuantity, decreaseQuantity, addProduct, clearCart };\n\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import state, { PAGES, increaseQuantity, decreaseQuantity, addProduct, clearCart } from './state';\nimport render from './render';\n\nconst rootEl = document.querySelector('#root');\n\n// add product to cart\nfunction addToCart (rootEl) {\n  rootEl.addEventListener('click', (e) => {\n    if (e.target.classList.contains('add-to-cart')) {\n      const index = e.target.dataset.index;\n      addProduct(index);\n    }\n\n    render(state, rootEl);\n  })\n}\n\n\n// add or reduce the quantity of products\nfunction changeQuantity (rootEl) {\n  rootEl.addEventListener('click', (e) => {\n    const index = e.target.dataset.index;\n\n    if (e.target.classList.contains('decrease')) {\n      decreaseQuantity(index);\n    }\n\n    if (e.target.classList.contains('increase')) {\n      increaseQuantity(index);\n    }\n\n    render(state, rootEl);\n  })\n}\n\n\n// change the page via buttons\n// 不能传state进去\nfunction changePage (rootEl) {\n  rootEl.addEventListener('click', (e) => {\n    if (e.target.classList.contains('view-cart')) {\n      state.page = PAGES.CART;\n    }\n\n    if (e.target.classList.contains('hide-cart')) {\n      state.page = PAGES.PRODUCTS;\n    }\n\n    render(state, rootEl);\n  });\n}\n\n\nfunction checkout (rootEl) {\n  rootEl.addEventListener('click', (e) => {\n    if (e.target.classList.contains('checkout')) clearCart();\n    render(state, rootEl);\n  });\n}\n\n\nrender(state, rootEl);\naddToCart(rootEl);\nchangeQuantity(rootEl);\nchangePage(rootEl);\ncheckout(rootEl);"],"names":["PAGES","render","state","rootEl","page","PRODUCTS","renderProducts","CART","renderCart","html","products","map","product","index","concat","imgUrl","name","price","join","innerHTML","totalNum","cart_html","cartItems","item","totalPrice","quantity","toFixed","totalCost","addProduct","isExist","_iterator","_createForOfIteratorHelper","_step","s","n","done","value","err","e","f","push","decreaseQuantity","splice","increaseQuantity","clearCart","document","querySelector","addToCart","addEventListener","target","classList","contains","dataset","changeQuantity","changePage","checkout"],"sourceRoot":""}